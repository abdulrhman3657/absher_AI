# Absher AI Agent – Proactive Assistant

A full-stack demo of an Absher-style assistant with LLM chat, proactive reminders, and simple renewal simulation.

Backend: **FastAPI + OpenAI + LangChain**  
Frontend: **Vite + React**

---

## What it Does

- **AI Chat Assistant**
  - Uses LangChain `AgentType.OPENAI_FUNCTIONS`.
  - Reads the user’s service status (National ID, Driver License, Passport, Vehicle Registration).
  - Uses RAG over `absher_knowledge.json` (FAISS + OpenAI embeddings).
  - Follows a multi-step renewal flow (explain → ask → confirm → propose action).

- **Proactive Notifications**
  - Generates SMS-style messages for services that are expired or expiring soon.
  - Can be triggered:
    - Automatically via a simple scheduler (every 30 days).
    - Manually from the frontend (`/run_proactive`).

- **Mock Login & Sessions**
  - Template users loaded from `backend/users.json`.
  - On login, a **per-session** in-memory user is created.
  - A login summary notification is generated by an LLM.

- **Renewal & Payment Demo**
  - The agent proposes a **renewal action**.
  - Frontend shows a confirmation modal and calls:
    - `/payment/charge` (always “success” for demo).
    - `/confirm-action` (backend extends expiry dates in memory).
  - No real payment or persistence is implemented.

- **Voice Support**
  - `/voice/transcribe` – speech-to-text (OpenAI).
  - `/voice/tts` – text-to-speech (MP3 response).

---

## Backend Structure (summary)

- `main.py` – FastAPI app & routes.
- `llm_chat.py` – Chat orchestration + proposed actions.
- `absher_agent.py` – LangChain agent + tools.
- `absher_tools.py` – RAG + renewal tool wrappers.
- `absher_rag.py` – FAISS index over `absher_knowledge.json`.
- `notification_ai.py` – SMS / login summary text.
- `proactive.py` – Proactive engine + scheduler.
- `store.py` – In-memory users, notifications, renewals.
- `models.py` – Pydantic models.
- `pricing.py` – Simple fee lookup.

---

## Backend: Setup & Run

```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --reload
```

## Frontend: Setup & Run

```bash
cd frontend
pip install
npm run dev
```